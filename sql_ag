set autocommit on;

###############################################################
##  CREATE TABLES dans DATABASE nomm√©e p1091602_bin3002_tp1  ##
###############################################################


DROP TABLE IF EXISTS ishare_user;
DROP TABLE IF EXISTS type;
DROP TABLE IF EXISTS objet;
DROP TABLE IF EXISTS emprunte;
DROP TABLE IF EXISTS interet;
DROP TABLE IF EXISTS maison;
DROP TABLE IF EXISTS velo;
DROP TABLE IF EXISTS auto;


create table ishare_user (
  user_id INTEGER not null AUTO_INCREMENT,
  prenom VARCHAR2(30) not null,
  nom VARCHAR2(30) not null,
  courriel VARCHAR2(60) not null,
  numtel NUMBER(20) not null,
  code_postal VARCHAR2(15) not null,
  numero NUMBER(20),
  rue VARCHAR2(60),
  province VARCHAR2(4),
  ville VARCHAR2(60));

ALTER TABLE ishare_user ADD CONSTRAINT pk_ishare_user PRIMARY KEY(user_id);

create table type (
  nom VARCHAR2(7) not null);

ALTER TABLE type ADD CONSTRAINT pk_type PRIMARY KEY(nom);

create table objet (
  objet_id INTEGER not null AUTO_INCREMENT,
  description VARCHAR2(300),
  disponible NUMBER(1) not null,
  prix NUMBER not null,
  duree_partage NUMBER not null,
  type VARCHAR2(7) not null,
  owner_id INTEGER not null);

ALTER TABLE objet ADD CONSTRAINT pk_objet PRIMARY KEY (objet_id);
ALTER TABLE objet ADD CONSTRAINT fk_owner_id FOREIGN KEY (owner_id) REFERENCES ishare_user(user_id);
ALTER TABLE objet ADD CONSTRAINT fk_objet_type FOREIGN KEY (type) REFERENCES type(nom);

create table emprunte (
  user_id INTEGER not null,
  objet_id INTEGER not null,
  jour_in NUMBER not null,
  mois_in NUMBER not null,
  annee_in NUMBER,
  jour_out NUMBER not null,
  mois_out NUMBER not null,
  annee_out NUMBER);

ALTER TABLE emprunte ADD CONSTRAINT pk_emprunt_user PRIMARY KEY(user_id);
ALTER TABLE emprunte ADD CONSTRAINT pk_emprunt_objet PRIMARY KEY(objet_id);
ALTER TABLE emprunte ADD CONSTRAINT fk_emprunt_user FOREIGN KEY (user_id) REFERENCES ishare_user(user_id);
ALTER TABLE emprunte ADD CONSTRAINT fk_emprunt_objet FOREIGN KEY (objet_id) REFERENCES objet(objet_id);

create table interet (
  user_id INTEGER not null,
  objet_id INTEGER not null);

ALTER TABLE interet ADD CONSTRAINT pk_interet_user PRIMARY KEY(user_id);
ALTER TABLE interet ADD CONSTRAINT pk_interet_objet PRIMARY KEY(objet_id);
ALTER TABLE interet ADD CONSTRAINT fk_interet_user FOREIGN KEY (user_id) REFERENCES ishare_user(user_id);
ALTER TABLE interet ADD CONSTRAINT fk_interet_objet FOREIGN KEY (objet_id) REFERENCES objet(objet_id);

create table maison(
  type VARCHAR2(7) not null,
  annee NUMBER,
  superficie NUMBER,
  etage NUMBER,
  chambre NUMBER,
  meuble NUMBER(1) not null,
  stationnement NUMBER(1) not null,
  salle_bain NUMBER);

ALTER TABLE maison ADD CONSTRAINT pk_maison PRIMARY KEY(type);
ALTER TABLE maison ADD CONSTRAINT fk_maison_type FOREIGN KEY (type) REFERENCES type(nom);
 
create table velo(
  type VARCHAR2(7) not null,
  marque VARCHAR2(30),
  taille_cadre NUMBER,
  vitesse NUMBER,
  frein VARCHAR2(30),
  taille_roue NUMBER,
  type_velo VARCHAR2(30));

ALTER TABLE velo ADD CONSTRAINT pk_velo PRIMARY KEY(type);
ALTER TABLE velo ADD CONSTRAINT fk_velo_type FOREIGN KEY (type) REFERENCES type(nom);
 
create table auto(
  type VARCHAR2(7) not null,
  annee NUMBER,
  marque VARCHAR2(30),
  km NUMBER,
  transmission_manuel NUMBER(1) not null,
  format VARCHAR2(30),
  consommation NUMBER);

ALTER TABLE auto ADD CONSTRAINT pk_auto PRIMARY KEY(type);
ALTER TABLE auto ADD CONSTRAINT fk_auto_type FOREIGN KEY (type) REFERENCES type(nom);


###############################################################
##                 INSERT values dans TABLES                 ##
###############################################################

INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (001,'Simon','Milhomme','smilhomme@gmail.com',4501234567, 'H9S3K6', 314, 'Mimosa', 'QC', 'Dorval');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (002, 'Simone', 'Milhomski','milhomski@gmail.com', 5149762534, 'H4B2C6', 4572, 'Coronation', 'QC', 'Montreal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (003, 'Ginette', 'Milou', 'acoche450@gmail.com', 5147284354, 'H3T1J4', 2350, 'boulevard Montpetit', 'QC', 'Montreal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (004, 'Richard', 'Martineau', 'rich_money@gmail.com', 5148275454, 'J0K2R0', 3031, 'rang Saint-Jacques', 'QC', 'Saint-Jacques');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (005, 'Marie', 'Framboise', 'franframboise@gmail.com', 5147280974, 'H3R1L8', 72, 'Kenastion', 'QC', 'Ville Mont-Royal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (006, 'Dieudonne', 'Conde', 'chat_cool@gmail.com', 5148340987, 'H3S1W6', 3195, 'Ellendale', 'QC', 'Montreal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (007, 'Jules', 'Poirier', 'plus_grand_que_toi@gmail.com', 5147282345, 'H3V1E1', 4950, 'Coronet', 'QC', 'Montreal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (008, 'Lang', 'Cerise', 'cerise@gmail.com', 5149872847, 'H1J2Y4', 7080, 'Avenue du Belvedere', 'QC', 'Anjou');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (009, 'Choco', 'Montana', 'montana@gmail.com', 5147297676, 'H2A3C9', 7380, '8e avenue', 'QC', 'Montreal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (010, 'Valerie','Zoukini','val@gmail.com', 4188332626, 'H3W1R6', 4853, 'Lacombe', 'QC', 'Montreal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (011, 'Oli', 'Miner', 'oli_cool@gmail.com', 5147654321,'H3T1J6', 2747, 'boul. Edouard-Montpetit', 'QC', 'Montreal');
INSERT INTO ishare_user (user_id, prenom, nom, courriel, numtel, code_postal, numero, rue, province, ville) Values (012, 'Jet', 'Li', 'karate@gmail.com', 4182780927, 'H3T1J1', 4175, 'ave. Saint-Kevin', 'QC', 'Montreal');
